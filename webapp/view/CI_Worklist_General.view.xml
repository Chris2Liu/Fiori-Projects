<mvc:View xmlns:c="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:smartfilterbar="sap.ui.comp.smartfilterbar"
	xmlns:u="sap.ui.unified" xmlns:smarttable="sap.ui.comp.smarttable" xmlns:t="sap.ui.table"
	controllerName="ZEFORM.Invoice.controller.CI_Worklist_General" xmlns:html="http://www.w3.org/1999/xhtml">
	<App>
		<pages>
			<Page showHeader="false">
				<content>
					<smartfilterbar:SmartFilterBar id="smartFilterBar" initialise="onInitSmartFilterBar" basicSearchFieldName="Customername,Description"
						enableBasicSearch="true" entitySet="CI_WORKLIST_GENERALSet" considerSelectionVariants="true" persistencyKey="CI_Worklist_General_Filter"></smartfilterbar:SmartFilterBar>
					<smarttable:SmartTable id="smarttable" entitySet="CI_WORKLIST_GENERALSet" tableType="Table" smartFilterId="smartFilterBar" editable="false"
						useExportToExcel="true" header="General Enquiry" showRowCount="true" enableAutoBinding="false" beforeRebindTable="onBeforeRebindTable"
						useVariantManagement="true" persistencyKey="CI_Worklist_General_List" beforeExport="onBeforeExport" initialise="onInitSmartTable">
						<smarttable:customData>
							<c:CustomData key="p13nDialogSettings" value='\{ "filter": \{ "visible": false} }'/>
						</smarttable:customData>
						<smarttable:layoutData>
							<FlexItemData growFactor="1" baseSize="0%"/>
						</smarttable:layoutData>
						<smarttable:customToolbar>
							<OverflowToolbar design="Transparent">
								<ToolbarSpacer/>
								<OverflowToolbarButton icon="sap-icon://add-document" press="openDocDialog" tooltip="Documents"/>
								<OverflowToolbarButton icon="sap-icon://sap-box" type="Transparent" press="printGen"
									tooltip="Export Header, Item, Account Assignment data to Spreadsheet"/>
							</OverflowToolbar>
						</smarttable:customToolbar>
						<t:Table id="table" sort="sortTable" visibleRowCount="15" threshold="10000">
							<t:columns>
								<t:Column width="auto" minWidth="150px" sortProperty="Cino"><Label text="Invoice No."/>
									<t:template>
										<Link text="{Cino}" press="onPressCino" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "Cino", "leadingProperty": "Cino"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="170px" sortProperty="Statustext"><Label text="Status"/>
									<t:template>
										<Text text="{Statustext}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "Statustext", "leadingProperty": "Statustext"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="120px" sortProperty="Invdate"><Label text="Invoice Date"/>
									<t:template>
										<Text text="{path: 'Invdate', formatter:'.formatter.formatDate'}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "Invdate","leadingProperty": "Invdate","type":"date"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="200px" sortProperty="Rvno"><Label text="RV No."/>
									<t:template>
										<Text text="{Rvno}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "Rvno", "leadingProperty": "Rvno"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="200px" sortProperty="StatusRvtext"><Label text="RV Status of each RV No."/>
									<t:template>
										<Text text="{StatusRvtext}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "StatusRvtext", "leadingProperty": "StatusRvtext"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="200px" sortProperty="ChgDateRv"><Label text="Time of last update of RV status of each RV No."/>
									<t:template>
										<Text text="{ChgDateRv}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "ChgDateRv","leadingProperty": "ChgDateRv"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="200px" sortProperty="Customername"><Label text="Customer Name"/>
									<t:template>
										<Text text="{Customername}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "Customername", "leadingProperty": "Customername"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="200px" sortProperty="CustPerson"><Label text="Customer Contact Person"/>
									<t:template>
										<Text text="{CustPerson}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "CustPerson", "leadingProperty": "CustPerson"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="200px" sortProperty="Description"><Label text="Item Description"/>
									<t:template>
										<Text text="{Description}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "Description", "leadingProperty": "Description"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="100px" sortProperty="Waers"><Label text="Currency"/>
									<t:template>
										<Text text="{Waers}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "Waers", "leadingProperty": "Waers"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="200px" sortProperty="Tolamt" hAlign="Right"><Label text="Total Amount"/>
									<t:template>
										<Text text="{path: 'Tolamt', type:'sap.ui.model.type.Float', formatOptions: { minFractionDigits: 2, maxFractionDigits: 2 }}"
											wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "Tolamt", "leadingProperty": "Tolamt"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="200px" sortProperty="Bankaccountno"><Label text="Bank Account No."/>
									<t:template>
										<Text text="{Bankaccountno}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "Bankaccountno", "leadingProperty": "Bankaccountno"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="200px" sortProperty="ChgDate"><Label text="Time of last update of status"/>
									<t:template>
										<Text text="{path: 'ChgDate', formatter:'.formatter.formatDate'}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "ChgDate","leadingProperty": "ChgDate","type":"date"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="200px" sortProperty="Projectref"><Label text="Project Reference"/>
									<t:template>
										<Text text="{Projectref}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "Projectref", "leadingProperty": "Projectref"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="200px" sortProperty="Agreementno"><Label text="Agreement No./Other Ref."/>
									<t:template>
										<Text text="{Agreementno}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "Agreementno", "leadingProperty": "Agreementno"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="200px" sortProperty="Duedate"><Label text="Payment Due Date"/>
									<t:template>
										<Text text="{path: 'Duedate', formatter:'.formatter.formatDate'}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "Duedate","leadingProperty": "Duedate","type":"date"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="300px" sortProperty="Remarkdept"><Label text="Remarks for Departmentâ€™s Internal Use"/>
									<t:template>
										<Text text="{Remarkdept}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "Remarkdept", "leadingProperty": "Remarkdept"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="200px" sortProperty="CustTel"><Label text="Customer Phone No."/>
									<t:template>
										<Text text="{CustTel}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "CustTel", "leadingProperty": "CustTel"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="200px" sortProperty="CustEmail"><Label text="Customer Email Address"/>
									<t:template>
										<Text text="{CustEmail}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "CustEmail", "leadingProperty": "CustEmail"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="200px" sortProperty="CtDept"><Label text="Department"/>
									<t:template>
										<Text text="{CtDept}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "CtDept", "leadingProperty": "CtDept"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="200px" sortProperty="Division"><Label text="Division/Unit"/>
									<t:template>
										<Text text="{Division}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "Division", "leadingProperty": "Division"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="200px" sortProperty="CtPerson"><Label text="Dept. Contact Person"/>
									<t:template>
										<Text text="{CtPerson}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "CtPerson", "leadingProperty": "CtPerson"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="200px" sortProperty="CtTel"><Label text="Dept. Contact Person Phone No."/>
									<t:template>
										<Text text="{CtTel}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "CtTel", "leadingProperty": "CtTel"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="200px" sortProperty="CtEmail"><Label text="Dept. Email Address"/>
									<t:template>
										<Text text="{CtEmail}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "CtEmail", "leadingProperty": "CtEmail"}'/></t:customData>
								</t:Column>
								<!--<t:Column width="auto" minWidth="200px" sortProperty="CrtBy"><Label text="Preparer Name"/>-->
								<!--	<t:template>-->
								<!--		<Text text="{CrtBy}" wrapping="false"/>-->
								<!--	</t:template>-->
								<!--	<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "CrtBy", "leadingProperty": "CrtBy"}'/></t:customData>-->
								<!--</t:Column>-->
								<t:Column width="auto" minWidth="200px" sortProperty="Admin"><Label text="Invoice Admin Party"/>
									<t:template>
										<Text text="{Admin}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "Admin", "leadingProperty": "Admin"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="200px" sortProperty="CrtDate" visible="false"><Label text="Created On"/>
									<t:template>
										<Text text="{path: 'CrtDate', formatter:'.formatter.formatDate'}" wrapping="false"/>
									</t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "CrtDate","leadingProperty": "CrtDate","type":"date"}'/></t:customData>
								</t:Column>
							</t:columns>
						</t:Table>
					</smarttable:SmartTable>
				</content>
			</Page>
			<Page>
				<Dialog id="docDialog" title="Document">
					<content>
						<Toolbar>
							<Toolbar>
								<content>
									<u:FileUploader id="docFile" sameFilenameAllowed="true"/>
									<Button text="Upload" press="docAddRow"/>
									<Button text="Delete" press="docRemoveRow"/>
								</content>
							</Toolbar>
						</Toolbar>
						<Table id="docTable" mode="MultiSelect" fixedLayout="true" items="{Doc>/DOCSet}">
							<columns>
								<Column width="15rem">
									<Text text="File Name"/>
								</Column>
								<Column width="8rem">
									<Text text="Upload Date"/>
								</Column>
								<Column width="8rem">
									<Text text="FNO"/>
								</Column>
								<Column width="8rem">
									<Text text="Dept."/>
								</Column>
								<Column width="11rem">
									<Text text="Parent Folder"/>
								</Column>
								<Column width="8rem">
									<Text text="Attach to Invoice Email"/>
								</Column>
							</columns>
							<items>
								<ColumnListItem>
									<cells>
										<Link text="{Doc>Fname}" press="downloadDoc"/>
										<Text text="{path: 'Doc>Updat', formatter:'.formatter.formatDate'}"/>
										<Text text="{Doc>Fno}"/>
										<Text text="{Doc>Dept}"/>
										<Text text="{Doc>Parent}"/>
										<CheckBox selected="{Doc>Email}" enabled="{Doc>EmailEnabled}"/>
										<Text text="{Doc>Doctype}" visible="false"/>
										<Text text="{Doc>Content}" visible="false"/>
									</cells>
								</ColumnListItem>
							</items>
						</Table>
					</content>
					<buttons>
						<Button text="Save" press="doc"/>
						<Button text="Close" press="closeDocDialog"/>
					</buttons>
				</Dialog>
				<BusyDialog id="loadingDialog" title="Loading"/>
			</Page>
		</pages>
	</App>
</mvc:View>