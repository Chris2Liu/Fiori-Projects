<mvc:View controllerName="ZEFORM.PettyCash.controller.MassReassign" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:mvc="sap.ui.core.mvc"
	xmlns:c="sap.ui.core" xmlns:u="sap.ui.unified" xmlns="sap.m" xmlns:t="sap.ui.table" xmlns:f="sap.f" xmlns:layout="sap.ui.layout"
	xmlns:smartfilterbar="sap.ui.comp.smartfilterbar" xmlns:smarttable="sap.ui.comp.smarttable" xmlns:form="sap.ui.layout.form" height="100%">
	<App>
		<pages>
			<Page enableScrolling="false" showHeader="false">
				<content>
					<smartfilterbar:SmartFilterBar id="smartFilterBar" initialise="onInitSmartFilterBar" basicSearchFieldName="PreparedBy,PreparerName"
						enableBasicSearch="true" entitySet="MASSREASSIGNSet" assignedFiltersChanged="onAssignedFiltersChanged">
						<smartfilterbar:controlConfiguration></smartfilterbar:controlConfiguration>
					</smartfilterbar:SmartFilterBar>
					<smarttable:SmartTable id="smarttable" entitySet="MASSREASSIGNSet" tableType="Table" smartFilterId="smartFilterBar" editable="false"
						useExportToExcel="true" header="Mass Reassignment of Preparers" showRowCount="true" beforeRebindTable="onBeforeRebindTable"
						beforeExport="onBeforeExport" enableAutoBinding="false" useVariantManagement="false" ignoreFromPersonalisation="Status">
						<smarttable:customData>
							<c:CustomData key="p13nDialogSettings" value='\{ "filter": \{ "visible": false} }'/>
						</smarttable:customData>
						<smarttable:layoutData>
							<FlexItemData growFactor="1" baseSize="0%"/>
						</smarttable:layoutData>
						<smarttable:customToolbar>
							<OverflowToolbar design="Transparent">
								<ToolbarSpacer/>
								<Button text="Reassign" type="Emphasized" press="openPrepareDialog"/>
							</OverflowToolbar>
						</smarttable:customToolbar>
						<t:Table id="table" visibleRowCount="15" threshold="10000" sort="sortTable">
							<t:columns>
								<t:Column width="auto" minWidth="100px" sortProperty="PreparedBy"><Label text="Current Preparer"/>
									<t:template><Link text="{PreparedBy}" wrapping="false"/></t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "PreparedBy", "leadingProperty": "PreparedBy"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="100px"><Label text="Preparer Name"/>
									<t:template><Text text="{PreparerName}" wrapping="false"/></t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "PreparerName", "leadingProperty": "PreparerName"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="100px"><Label text="Claim No."/>
									<t:template><Text text="{Claimno}" wrapping="false"/></t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "Claimno", "leadingProperty": "Claimno"}'/></t:customData>
								</t:Column>
								<t:Column width="auto" minWidth="100px"><Label text="Status"/>
									<t:template><Text text="{Statustext}" wrapping="false"/></t:template>
									<t:customData><c:CustomData key="p13nData" value='\{"columnKey": "Statustext", "leadingProperty": "Statustext"}'/></t:customData>
								</t:Column>
							</t:columns>
						</t:Table>
					</smarttable:SmartTable>
				</content>
			</Page>
			<Page>
				<Dialog id="prepareDialog" title="Reassign Preparer">
					<content>
						<form:SimpleForm layout="ResponsiveGridLayout">
							<Label text="New Preparer"/>
							<Select items="{ path: '/STAFFSet', length: 10000, filters: [{ path: 'Role', operator: 'EQ', value1: '1' }]}" showSecondaryValues="true"
								id="newPrepare">
								<c:ListItem key="{Staffid}" text="{Disname}" additionalText="{Name}"/>
							</Select>
						</form:SimpleForm>
					</content>
					<buttons>
						<Button text="Save" press="prepare"/>
						<Button text="Cancel" press="cancelPrepare"/>
					</buttons>
				</Dialog>
			</Page>
		</pages>
	</App>
</mvc:View>